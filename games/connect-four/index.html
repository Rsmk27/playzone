<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connect Four ‚Äì PlayZone</title>
    <script src="../../scripts/mobile-controls.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 20px;
        }
        .status {
            text-align: center;
            font-size: 1.3em;
            margin-bottom: 20px;
            color: #333;
        }
        .board {
            display: inline-grid;
            grid-template-columns: repeat(7, 60px);
            gap: 5px;
            background: #2c3e50;
            padding: 10px;
            border-radius: 10px;
            touch-action: none;
        }
        .cell {
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
        }
        .cell:hover {
            background: #e0e0e0;
        }
        .cell.red {
            background: #e74c3c;
        }
        .cell.yellow {
            background: #f39c12;
        }
        @media (max-width: 600px) {
            .board {
                grid-template-columns: repeat(7, 45px);
            }
            .cell {
                width: 45px;
                height: 45px;
            }
            .container {
                padding: 20px;
            }
        }
        button {
            width: 100%;
            margin-top: 20px;
            padding: 15px;
            font-size: 1.1em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            background: #667eea;
            color: white;
            transition: all 0.3s;
        }
        button:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }
        .home-btn {
            background: #6b7280;
        }
        .home-btn:hover {
            background: #4b5563;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üî¥üü° Connect Four</h1>
        <div class="status" id="status">Red's turn</div>
        <div class="board" id="board"></div>
        <button onclick="newGame()">New Game</button>
        <a href="../../index.html" style="text-decoration: none;"><button class="home-btn">‚Üê Back to Home</button></a>
    </div>

    <script>
        const ROWS = 6, COLS = 7;
        let board = [];
        let currentPlayer = 'red';

        function initBoard() {
            board = Array(ROWS).fill().map(() => Array(COLS).fill(null));
            currentPlayer = 'red';
            render();
        }

        function render() {
            const boardEl = document.getElementById('board');
            boardEl.innerHTML = '';
            for (let r = 0; r < ROWS; r++) {
                for (let c = 0; c < COLS; c++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell ' + (board[r][c] || '');
                    cell.onclick = () => dropPiece(c);
                    boardEl.appendChild(cell);
                }
            }
            document.getElementById('status').textContent = `${currentPlayer === 'red' ? 'Red' : 'Yellow'}'s turn`;
        }

        function dropPiece(col) {
            for (let row = ROWS - 1; row >= 0; row--) {
                if (!board[row][col]) {
                    board[row][col] = currentPlayer;
                    render();
                    
                    if (checkWin(row, col)) {
                        document.getElementById('status').textContent = `${currentPlayer === 'red' ? 'Red' : 'Yellow'} wins!`;
                        setTimeout(newGame, 2000);
                        return;
                    }
                    
                    currentPlayer = currentPlayer === 'red' ? 'yellow' : 'red';
                    render();
                    return;
                }
            }
        }

        function checkWin(row, col) {
            const directions = [
                [{r:0,c:1},{r:0,c:-1}],
                [{r:1,c:0},{r:-1,c:0}],
                [{r:1,c:1},{r:-1,c:-1}],
                [{r:1,c:-1},{r:-1,c:1}]
            ];
            
            for (let dir of directions) {
                let count = 1;
                for (let d of dir) {
                    let r = row + d.r, c = col + d.c;
                    while (r >= 0 && r < ROWS && c >= 0 && c < COLS && board[r][c] === currentPlayer) {
                        count++;
                        r += d.r;
                        c += d.c;
                    }
                }
                if (count >= 4) return true;
            }
            return false;
        }

        function newGame() {
            initBoard();
        }

        initBoard();
    </script>
</body>
</html>
